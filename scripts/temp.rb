require 'rmagick'

directory = 'death_comes_swiftly'
dir = "../public/calling_cards/#{directory}"

system "rm #{dir}/combined_images/*.png"





# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/001.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/002.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/005.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/006.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_001.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/003.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/004.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/007.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/008.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_002.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/009.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/010.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/013.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/014.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_003.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/011.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/012.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/015.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/016.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_004.png")










































# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/001.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/002.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/003.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/004.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_001.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/005.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/006.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/007.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/008.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_002.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/009.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/010.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/011.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/012.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_003.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/013.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/014.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/015.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/016.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_004.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/017.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/018.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/019.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/020.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_005.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/021.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/022.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/023.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/024.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_006.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/025.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/026.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/027.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/028.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_007.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/029.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/030.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/031.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/032.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_008.png")













# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/001.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/002.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/007.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/008.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_001.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/003.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/004.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/009.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/010.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_002.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/005.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/006.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/011.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/012.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_003.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/013.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/014.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/019.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/020.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_004.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/015.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/016.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/021.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/022.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_005.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/017.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/018.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/023.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/024.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_006.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/025.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/026.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/031.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/032.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_007.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/027.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/028.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/033.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/034.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_008.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/029.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/030.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/035.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/036.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_009.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/037.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/038.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/043.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/044.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_010.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/039.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/040.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/045.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/046.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_011.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/041.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/042.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/047.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/048.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_012.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/049.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/050.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/055.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/056.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_013.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/051.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/052.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/057.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/058.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_014.png")



# final_image = Magick::ImageList.new
# first_row = Magick::ImageList.new
# second_row = Magick::ImageList.new

# first_row.push(Magick::Image.read("#{dir}/extracted_images/053.png").first)
# first_row.push(Magick::Image.read("#{dir}/extracted_images/054.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/059.png").first)
# second_row.push(Magick::Image.read("#{dir}/extracted_images/060.png").first)

# final_image.push(first_row.append(false))
# final_image.push(second_row.append(false))
# final_image.append(true).write("#{dir}/combined_images/final_015.png")







system "cp #{dir}/extracted_images/* #{dir}/combined_images/"
filenames = Dir.glob("#{dir}/combined_images/*.png")


filenames.each do |file_name|
  File.rename(file_name, "#{file_name.gsub('combined_images/', 'combined_images/final_')}")
end



num_images = Dir[File.join("#{dir}/combined_images", '**', '*')].count { |file| File.file?(file) }
gif = Magick::ImageList.new

num_images.times do |n|
  if n+1 < 10
    gif << Magick::Image.read("#{dir}/combined_images/final_00#{n+1}.png").first
  elsif n+1 > 99
    gif << Magick::Image.read("#{dir}/combined_images/final_#{n+1}.png").first
  else
    gif << Magick::Image.read("#{dir}/combined_images/final_0#{n+1}.png").first
  end
end

gif.write("#{dir}/#{directory.gsub('_', '-')}.gif")
